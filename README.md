# Техническая документация проекта  
**«Стратегия Арктики: Север»**  

## 1. Общая информация

| Параметр                  | Значение                                                                 |
|---------------------------|--------------------------------------------------------------------------|
| Название                  | Стратегия Арктики: Север                                                 |
| Жанр                      | Гранд-стратегия / 4X / Симулятор управления с системой репутации        |
| Платформы                 | PC (Windows, macOS, Linux), возможен порт на консоли и мобильные (позже) |
| Целевая аудитория         | 18–45 лет, любители Civilization, Frostpunk, Anno, Tropico, Victoria 3  |
| Движок                    | Godot 4.3 (с GDExtension для тяжёлых вычислений)                         |
| Языки разработки          | GDScript + C# (через Godot#.NET 6) + C++ (GDExtension модули)            |
| Мультиплеер               | До 4 игроков (кооператив + соревновательный)                             |
| Режимы игры               | Одиночная кампания, Сценарии, Песочница, Мультиплеер                     |
| Локализация               | Русский (полная), английский, китайский (упрощённый)                     |
| Планируемый срок разработки | 26–30 месяцев (Alpha — Q4 2026, релиз — Q3 2028)                        |

## 2. Архитектура игры

```
Core/
 ├─ GameStateManager.gd (Autoload Singleton)
 ├─ TurnManager.gd
 ├─ SaveLoadSystem.gd (JSON + двоичный MessagePack)
 ├─ EventBus.gd (сигналы Godot)
 ├─ ModLoader/ (поддержка .pck и GDExtension .dll/.so)
Managers/
 ├─ MapManager.gd
 ├─ EconomyManager.gd
 ├─ PopulationManager.gd
 ├─ ReputationManager.gd
 ├─ DiplomacyManager.gd
 ├─ ClimateManager.gd (Compute-шейдеры через RenderingServer)
 ├─ MilitaryManager.gd
 └─ ScienceManager.gd
Data/ — всё через Resource (*.tres) и JSON (для модов)
```

## 3. Карта и процедурная генерация

- Размер базовой карты: 512 × 512 гексагональных тайлов (1 тайл ≈ 1×1 км)  
- Генерация высот и береговой линии на основе реальных данных ArcticDEM  
- Динамический лед: каждый ход рассчитывается на GPU через Compute Shaders (RDShader)  
- Погода: глобальная система частиц + пост-процесс (метели, полярное сияние)

## 4. Основные системы

### 4.1. Система репутации (ReputationManager.gd)

```gdscript
class_name ReputationManager
extends Node

var factions : Dictionary = {}          # FactionType → ReputationData
var global_prestige : int = 0
var reputation_points : int = 100       # тратятся на дипломатические акции

func change_reputation(faction : FactionType, delta : int, reason : String) -> void:
    # логика изменения + сигналы
    pass
```

Уровни репутации (-100 … +100):

| Диапазон   | Название           | Множители |
|------------|--------------------|-----------|
| -100..-70  | Враг               | ×0.1–0.5  |
| -69..-30   | Враждебность       | ×0.5–0.8  |
| -29..+29   | Нейтралитет        | ×1.0      |
| +30..+69   | Дружелюбие         | ×1.2–1.5  |
| +70..+100  | Союзник / Братство | ×1.6–3.0  |

### 4.2. Экономическая модель
38 товаров, динамические мировые цены, отдельный ресурс «Транзит по СМП» (млн тонн/год)

### 4.3. Климатическая система
Глобальное потепление +0.05 °C/ход, случайные события (штормовой нагон, разлив нефти и т.д.)

### 4.4. Население
4 категории (вахтовики, постоянные, коренные, специалисты), счастье, здоровье, образование

### 4.5. Наука и технологии
180 технологий в 6 ветках, хранятся как Resource-файлы

## 5. Статус ключевых механик

| Механика                         | Приоритет | Сложность     | Статус         |
|----------------------------------|-----------|---------------|----------------|
| Походовая система (год = ход)    | Высокий   | Низкая        | Готово         |
| Динамическая карта льда          | Высокий   | Очень высокая | В работе (Compute) |
| Система репутации (5 фракций)    | Высокий   | Средняя       | Готово         |
| Экономика + мировые цены         | Высокий   | Высокая       | Прототип       |
| Строительство и логистика        | Высокий   | Высокая       | Прототип       |
| СМП и транзит                    | Высокий   | Средняя       | Готово         |
| Климатические события            | Средний   | Высокая       | Планируется    |
| Население и демография           | Высокий   | Высокая       | В работе       |
| Научное дерево                   | Средний   | Средняя       | Готово         |
| Мультиплеер (онлайн + hot-seat)  | Низкий    | Очень высокая | Планируется    |

## 6. Форматы данных

- Баланс и здания — *.tres (Resource) + JSON (для модов)  
- Сохранения — MessagePack + Zstandard-сжатие  
- Моды — папка mods/, поддержка .pck и GDExtension-модулей

## 7. Графика и звук

| Элемент              | Решение                                      |
|----------------------|----------------------------------------------|
| Стиль                | Low-poly + реалистичное PBR-освещение        |
| Рендер               | Godot 4.3 Forward+                           |
| Карта                | Гексагоны с кастомным шейдером льда/снега     |
| UI                   | UIDocuments + кастомные шейдеры (иней)       |
| Анимации             | Skeletal 2D/3D + Spine (через плагин)        |
| Музыка               | Оркестр + аутентичные северные инструменты   |
| SFX                  | Полевые записи (Ямал, Норильск, ледоколы)    |

## 8. Монетизация и DLC

- Базовая игра — 1 990 ₽ / $39.99  
- Season Pass (3 DLC):  
  1. «Северный флот»  
  2. «Зелёная Арктика»  
  3. «Новые горизонты» (2050+)

## 9. Roadmap

| Дата        | Milestone                             |
|-------------|---------------------------------------|
| Q1 2026     | Vertical Slice (регион Ямал 2025–2030)|
| Q4 2026     | Alpha (полная карта + все системы)    |
| Q2 2027     | Closed Beta                           |
| Q1 2028     | Релиз 1.0                             |
| Q4 2028     | DLC 1                                 |
